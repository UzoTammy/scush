{% extends 'pdf/base.html' %}
{% load custom_templates %}

<body>
{% block content %}
<div class='wrapper'>
    <div class='header'>    
        <h1 class='title'>Payroll Report for {{period_month}}</h1>
    </div>
</div>
<div class='details'>
    <p>Number of Staff: {{employees.count}} <br>
    As At: {{today}} WAT
    </p>
    <p>
        Total Net Pay: {{N}}{{total_net_pay.sum|floatformat:"2g"}}<br>
        Debit Incurred: {{N}}{{total_debit.sum|floatformat:"2g"}} |
        Credit Accrued: {{N}}{{total_credit.sum|floatformat:"2g"}}<br>
        Deductions: {{N}}{{total_deduction.sum|floatformat:"2g"}} |
        Balance: {{N}}{{total_outstanding.sum|floatformat:"2g"}}
    </p>

</div>
<br>
<h2 style="color:blue">Payroll for the period-{{period}}</h2>
<table class="table caption-top">
    <thead>
        <tr>
            <th width="40px" scope="col">ID</th>
            <th scope="col">Staff</th>
            <th scope="col">Pay Code</th>
            <th scope="col">Banker</th>
            <th scope="col">Acct Num</th>
            <th width="90px" scope="col">Salary</th>
            <th width="65px" scope="col">Tax</th>
            <th width="90px" scope="col" style="color: #007cae;">Net Pay</th>
        </tr>
    </thead>
    <tbody>
        {% for employee in employees %}
        <tr>
            <th scope="row">{{ employee.staff.id|zeropadding:3 }}</th>
            <td>{{employee.staff}}</td>
            <td style="text-align:center;">{{employee.staff.id|zeropadding:3}}-{{employee.period}}</td>
            <td style="text-align:center;">{{employee.staff.banker}}</td>
            <td style="text-align:right;">{{employee.staff.account_number|addsep}}</td>
<!--            Change to employee.salary-->
            <td style="text-align:right;">{{employee.staff.gross_pay.amount|floatformat:"2g"}}</td>
<!--            Change to employee.tax-->
            <td style="text-align:right;">{{employee.staff.tax_amount.amount|floatformat:"2g"}}</td>
            <td style="text-align:right; color:#007cae;">{{employee.net_pay.amount|floatformat:"2g"}}</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <th width="50px" scope="col">ID</th>
            <th scope="col">Staff</th>
            <th scope="col">Pay Code</th>
            <th scope="col">Banker</th>
            <th scope="col">Acct Num</th>
            <th scope="col">Salary</th>
            <th scope="col">Tax</th>
            <th scope="col" style="color: #007cae;">Net Pay</th>
        </tr>
    </tfoot>
</table>

{% endblock %}
</body>