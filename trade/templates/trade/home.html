{% extends 'users/base.html' %}
{% load custom_templates %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!--        side menu-->
        <div class="col-3 bg-dark">
            <ul class="nav flex-column mt-3">
                <li class="text-white">Trading, P & L</li>
                
                <li class="text-success ml-2">Monthly</li>
                
                <li class="nav-item">
                    <a class="nav-link"
                        href="{% url 'trade-list' %}">
                        <i class="fa fa-eye-slash text-warning"></i> View
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'trade-create' %}">
                        <i class="fa fa-plus text-warning"></i> Add
                    </a>
                </li>
                <li class="text-success ml-2">Daily</li>
                <li class="nav-item">
                    <a class="nav-link"
                        href="{% url 'trade-daily-list' trade_daily.year trade_daily.month %}">
                        <i class="fa fa-eye-slash text-warning"></i> View
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'trade-daily-create' %}">
                        <i class="fa fa-plus text-warning"></i> Add
                    </a>
                </li>
            </ul>
            
            <ul class="nav flex-column">
                <li class="text-white">Balance Sheet</li>
                <li class="nav-item">
                    <a class="nav-link"
                        href="#">
                        <i class="fa fa-book text-warning"></i> Report
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link"
                        href="#">
                        <i class="fa fa-eye-slash text-warning"></i> View
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <i class="fa fa-plus text-warning"></i> Add
                    </a>
                </li>
            </ul>
            
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <i class="fa fa-question text-warning"></i> Help
                    </a>
                </li>
            </ul>
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">
                        <i class="fa fa-reply text-warning"></i> Home
                    </a>
                </li>
            </ul>
        </div>
        
        <div class="col-9 mt-3 bg-white">
            <h3>{{year}} Trade Values </h3>
            
            <h5 class="text-primary"><i>Derived from Profit & Loss Account - {{daily.date}}</i></h5>
            <div class="row">
                <!-- sales -->
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="card text-white bg-info" 
                            style="max-width: 32rem; border-radius: 50px;">
                                <div class="card-body">
                                    <h5 class="card-title text-danger">Sales</h5>
                                    <p class="card-text">
                                        Latest Daily Post - {{daily.sales}}
                                    </p>
                                    
                                    <p class="card-text">
                                        Current Month - NGN{{daily_monthly_sales|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    <p class="card-text">
                                        YTD(current year) - NGN{{daily_yearly_sales|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    <!-- <p>---</p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- purchase -->
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="card text-white bg-warning" 
                            style="max-width: 32rem; border-radius: 50px;">
                                <div class="card-body">
                                    <h5 class="card-title text-danger">Purchase</h5>
                                    <p class="card-text">
                                        Latest Daily Post - {{daily.purchase}}
                                    </p>
                                    
                                    <p class="card-text">
                                        Current Month - NGN{{daily_monthly_purchase|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    <p class="card-text">
                                        YTD(current year) - NGN{{daily_yearly_purchase|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- expenses -->
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="card text-white bg-secondary" 
                            style="max-width: 32rem; border-radius: 50px;">
                                <div class="card-body">
                                    <h5 class="card-title text-danger">Expenses</h5>
                                    <p class="card-text">
                                        Latest Daily Post - NGN{{daily.expenses|default_if_none:0|floatformat:'2g'}}
                                    </p>
                                    
                                    <p class="card-text">
                                        Current Month - NGN{{daily_monthly_expenses|default_if_none:0|floatformat:'2g'}}
                                    </p>
                                    <p class="card-text">
                                        YTD(current year) - NGN{{daily_yearly_expenses|default_if_none:0|floatformat:'2g'}}
                                    </p>
                                    <!-- <p>---</p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- gross profit -->
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="card text-white bg-primary" 
                            style="max-width: 32rem; border-radius: 50px;">
                                <div class="card-body">
                                    <h5 class="card-title text-danger">Gross Profit</h5>
                                    <p class="card-text">
                                        Latest Daily Post - {{daily.gross_profit}}
                                    </p>
                                    
                                    <p class="card-text">
                                        Current Month - NGN{{daily_monthly_gross|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    <p class="card-text">
                                        YTD(current year) - NGN{{daily_yearly_gross|default_if_none:0.00|floatformat:'2g'}}
                                    </p>
                                    <!-- <p>---</p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
            <div class="row mt-3">
                <div class="col-sm-4">
                    
                    <table class="table">
                        <caption>Ratios </caption>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>SDR(%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for ratio in sales_drive|slice:":5"%}
                            <tr>
                                <td>{{ratio.date}}</td>
                                <td>{{ratio.sales.amount|div:ratio.opening_value.amount|multiply:100|floatformat:'2'}}</td>
                            </tr>   
                            {% endfor %}
                        </tbody>
                    </table>
                    <p class="text-muted"><i class="fa fa-braille text-warning"></i> SDR - Sales Drive Ratio(last five sales day)</p>
                    
                </div>
            </div>
        </div>
        
    </div>
    
</div>
{% endblock content %}