{% extends 'users/base.html' %}
{% load custom_tags %}

{% block head %}
<style>
    .oval {
        max-width: 5rem;
        border-radius: 50px 50px 50px 50px;
        background-color: rgb(133, 186, 239);
        padding: 5px;
    }
    .circle {
        max-width: 7rem; 
        border-radius: 100px 100px 100px 100px;
    }
    .curved-rectangle {
        max-width: 8rem;
        border-radius: 10px 10px 10px 10px;
    }
</style>
{% endblock head %}

{% block content %}
{% if empty_record %}
<div class="container mt-5">
    <div class="row">
        <div class="col">
            <h3>Record(s) must be in the database(s) to be able to view dashboard</h3>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <a class="" href="{% url 'home' %}"><i class="fa fa-reply fa-2x"></i>Home</a>
        </div>
    </div>
</div>
{% else %}
<div class="container text-center mt-3">
    <h5 class="text-danger text-left">As at {{date_of_record}}</h5>
    <div class="row">
        <div class="col-sm-3">
            <div class="card">
                <div class="card-header">
                  General
                </div>
                <ul class="list-group list-group-flush text-left">
                    <li class="list-group-item">Products <span class="float-right oval">#{{basics|array:1}}</span></li>
                    <li class="list-group-item">Customers <span class="float-right oval">#{{basics|array:2}}</span></li>
                    <li class="list-group-item">Workforce <span class="float-right oval">#{{basics|array:3}}</span></li>
                    <li class="list-group-item">Pending Application <span class="float-right oval">#{{basics|array:4}}</span></li>
                    
                </ul>
            </div>
        </div>
        
        <div class="col-sm-3">
            <div class="card">
                <div class="card-header">
                  YTD
                </div>
                <ul class="list-group list-group-flush text-left">
                    
                    <li class="list-group-item">Sales <span class="float-right oval">N{{ytd|array:1|myriad}}</span></li>
                    
                    <li class="list-group-item">Purchase <span class="float-right oval">N{{ytd|array:2|myriad}}</span></li>

                    <li class="list-group-item">Credits <span class="float-right oval">N{{ytd|array:3|myriad}}</span></li>

                    <li class="list-group-item">Rent Paid <span class="float-right oval">N{{ytd|array:4|myriad}}</span></li>
                </ul>
            </div>
        </div>
         
        <div class="col-sm-3">
            <div class="card">
                <div class="card-header">
                  Monthly KPI
                </div>
                <ul class="list-group list-group-flush text-left">
                    <li class="list-group-item">Growth
                        <small class="float-right text-danger">Pts</small>
                        <span class="float-right oval">{{monthly_kpi|array:1}}</span>
                    </li>
                    <li class="list-group-item">Margin
                        <small class="float-right text-danger">Pts</small>
                        <span class="float-right oval">{{monthly_kpi|array:2}}</span>
                    </li>
                    <li class="list-group-item">Expenses
                        <small class="float-right text-danger">Pts</small>
                        <span class="float-right oval">{{monthly_kpi|array:3}}</span>
                    </li>
                    <li class="list-group-item">Man-hour
                        <small class="float-right text-danger">Pts</small>
                        <span class="float-right oval">{{monthly_kpi|array:4}}</span>
                    </li>
                </ul>
            </div>
        </div>
         
        <div class="col-sm-3">
            <div class="card">
                <div class="card-header">
                  Others
                </div>
                <ul class="list-group list-group-flush text-left">
                    <li class="list-group-item">Bank Balance 
                        <span class="float-right oval">{{extras|array:1|myriad}}</span></li>  
                  <li class="list-group-item">Stores<span class="float-right oval">{{extras|array:2}}</span></li>
                  <li class="list-group-item">WFP
                    <small class="float-right text-danger">Pts</small>
                    <span class="float-right oval">{{extras|array:3}}</span>
                </li>
                  <li class="list-group-item">Low-Stock Velocity 
                    {% if stock_value_ratio > 0 %}
                    <span class="float-right"><i class="fa fa-arrow-up text-danger"></i></span>
                    <span class="float-right oval">{{stock_value_ratio}}%</span>
                    {% elif stock_value_ratio < 0 %}
                    <span class="float-right"><i class="fa fa-arrow-down text-success"></i></span>
                    <span class="float-right oval">{{stock_value_ratio|abs}}%</span>
                    {% else %}
                    <span class="float-right oval">0.00%</span>
                    {% endif %}
                </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-sm-6">
            <div class="card">
                <img src="data:image/png;base64, {{plotter|safe}}" class="card-img-top" alt="">
            </div>
        </div>
        <div class="col-sm-6">
            <div class="card">
                <img src="data:image/png;base64, {{donut|safe}}" class="card-img-top" alt="">
            </div>
        </div>
    </div>
    <div class="row mb-3 mt-3">
        <div class="col">
            <a class="float-right" href="{% url 'home' %}"><i class="fa fa-reply fa-2x"></i> Home</a>
        </div>
    </div>
</div>
{% endif %}
{% endblock content %}