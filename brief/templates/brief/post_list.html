{% extends 'users/base.html' %}

{% block content %}
<div class="container">
    <div class="row mt-3">
        <div class="col">
            <a class="btn btn-outline-dark float-right ml-1" href="{% url 'pdf-daily-post' %}">Today's Brief (pdf)</a>
            <a class="btn btn-outline-dark float-right ml-1" href="{% url 'post-create' %}">Add Post</a>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col">
            <ul class="list-group">
                {% for post in object_list %}
                <li class="list-group-item mb-2">
                    <div class="row">
                        <div class="col">
                            <h5>{{post.title}}</h5>
                            <p>{{post.content|truncatechars:50}}</p>
                            <small class="text-muted">Posted by {{post.author}} ({{post.author.position}})
                                <span class="float-right">
                                    <a class="btn btn-primary btn-sm" href="{% url 'post-detail' post.pk %}">Detail</a>
                                </span>
                            </small>
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% if is_paginated %}
                {% if page_obj.has_previous %}
                <a class="btn btn-outline-primary" href="?page=1"><i class="fa fa-angle-double-left"></i></a>
                <a class="btn btn-outline-primary" href="?page={{page_obj.previous_page_number}}"><i class="fa fa-angle-left"></i></a>
                {% endif%}
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <a class="btn btn-primary" href="?page={{num}}">{{ num }}</a>
                    {% elif num > page.obj.number|add:'-3' and num < page.obj.number|add:'3' %}
                        <a class="btn btn-outline-primary" href="?page={{num}}">{{ num }}</a>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a class="btn btn-outline-primary" href="?page={{page_obj.next_page_number}}"><i class="fa fa-angle-right"></i></a>
                <a class="btn btn-outline-primary" href="?page={{page_obj.paginator.num_pages}}"><i class="fa fa-angle-double-right"></i></a>
                {% endif%}
                
            {% endif %}
            <a class="btn btn-outline-dark float-right" href="{% url 'home' %}">Home</a>
        </div>
    </div>
</div>
{% endblock content %}