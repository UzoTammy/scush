{% extends 'users/base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block head %}
<style></style>
{% endblock %}

{% block content %}
<!--Modal section-->
<!--Profile Picture-->
<div class="modal"
     id="photoUpdate"
     tabindex="-1"
     role="dialog"
     aria-labelledby="photoUpdateLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="photoUpdateLabel">
                    <img src="{% static 'customer/logo.ico' %}"
                         style="width:40px"
                         alt="">
                </h5>
                <button type="button"
                        class="btn-close"
                        data-dismiss="modal"
                        aria-label="Close">
                    <span class="fa fa-times text-danger" aria-hidden="true"></span>
                </button>
            </div>
            <form method="POST" enctype="multipart/form-data">{% csrf_token %}
                <div class="modal-body">
                    <fieldset class="form-group bg-light">
                        <legend class="text-info mb-3">Change Your Profile Picture</legend>
                        {{ p_form|crispy }}
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="submit"
                            name="data"
                            class="btn btn-primary">Save
                    </button>
                    <button type="button"
                            class="btn btn-secondary" data-dismiss="modal">Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--Profile Info-->
<div class="modal"
     id="profileUpdate"
     tabindex="-1"
     role="dialog"
     aria-labelledby="profileUpdateLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="profileUpdateLabel">
                    <img src="{% static 'customer/logo.ico' %}"
                         style="width:40px"
                         alt="">
                </h5>
                <button type="button"
                        class="btn-close"
                        data-dismiss="modal"
                        aria-label="Close">
                    <span class="fa fa-times text-danger" aria-hidden="true"></span>
                </button>
            </div>
            <form method="POST">{% csrf_token %}
                <div class="modal-body">
                    <fieldset class="form-group bg-light">
                        <legend class="text-info mb-3">Update Profile Info</legend>
                        {{ u_form|crispy }}
                    </fieldset>
                </div>
                <div class="modal-footer">
                    <button type="submit"
                            class="btn btn-primary">Save
                    </button>
                    <button type="button"
                            class="btn btn-secondary" data-dismiss="modal">Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>


<div class="container">
    <div class="row">
        <div class="col"><h3 class="p-3">Your Info</h3></div>
        <div class="col mt-4 text-right"><a href="{% url 'password_reset' %}"
                                 class="card-link">
            <i class="fa fa-key text-danger"></i> Change password</a>
        </div>
    </div>
    <div class="card mb-2 justify-content-center shadow" style="height:240px">
        <div class="media">
              <img src="{{ user.profile.image.url }}"
                   width="120px"
                   height="150px"
                   class="rounded-circle mr-3 ml-2"
                   alt="...">
              <div class="media-body">
                <p class="text-muted">Personalise your account with a photo.</p>
                <h5 class="text-info mt-0">{{user.username|title}}
                        {% if user.is_superuser %}
                        <i class="fa fa-user-plus text-success"></i>
                        {% else %}
                        <i class="fa fa-user text-info"></i>
                        {% endif %}
                        <br> <small>{{user.email}}</small>
                    </h5>
                  <button
                            type="button"
                            data-toggle="modal"
                            data-target="#photoUpdate"
                            class="card-text btn btn-outline-info btn-sm"
                    >Change Photo
                    </button>
              </div>
            </div>
<!--        <div class="row g-0">-->
<!--            <div class="col-4">-->
<!--                <img src="{{ user.profile.image.url }}"-->
<!--                     style="height:200px; width:150px"-->
<!--                     class="card-img-top rounded-circle p-2"-->
<!--                     alt="...">-->
<!--            </div>-->
<!--            <div class="col-8">-->
<!--                <div class="card-body mt-3">-->
<!--                    <p class="card-text">Personalise your account with a photo.</p>-->
<!--                    <h5 class="ml-2">-->
<!--                        {{user.username|title}}-->
<!--                        {% if user.is_superuser %}-->
<!--                        <i class="fa fa-user-plus text-success"></i>-->
<!--                        {% else %}-->
<!--                        <i class="fa fa-user text-info"></i>-->
<!--                        {% endif %}-->
<!--                        <br> <small>{{user.email}}</small>-->
<!--                    </h5>-->
<!--                    <button-->
<!--                            type="button"-->
<!--                            data-toggle="modal"-->
<!--                            data-target="#photoUpdate"-->
<!--                            class="card-text btn btn-outline-info btn-sm"-->
<!--                    >Change Photo-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

    </div>
    <div class="row shadow">
        <div class="col">
            <ul class="list-group list-group-flush">
              <li class="list-group-item">
                  <div class="row">
                  <div class="col"><h5>Profile Info</h5></div>
                  <div class="col text-right">
                      <a href="#"
                         data-target="#profileUpdate"
                         data-toggle="modal"

                      ><i class="fa fa-edit text-danger"></i> Edit profile info</a></div>
                    </div>
              </li>

              <li class="list-group-item">Username: {{user.username}}</li>
                {% if user.email %}
              <li class="list-group-item">Email: {{user.email}}</li>
                {% endif %}
                {% if user.first_name %}
              <li class="list-group-item">Fullname: {{user.first_name}} {{user.last_name}}</li>
                {% endif %}
                <li class="list-group-item">Date Joined: {{user.date_joined}}</li>
                {% if user.group %}
                <li class="list-group-item">Group: {{user.group}}</li>
                {% endif %}
            </ul>
        </div>
    </div>

</div>



<!--<form method="POST" enctype="multipart/form-data">-->
<!--        {% csrf_token %}-->
<!--        <fieldset class="form-group bg-light">-->
<!--            <legend class="text-info mb-3">Add a photo</legend>-->
<!--            {{ p_form|crispy }}-->
<!--&lt;!&ndash;            {{ u_form|crispy }}&ndash;&gt;-->
<!--        </fieldset>-->
<!--        <div class="form-group">-->
<!--            <button class="btn btn-outline-info" type="submit">Save</button>-->
<!--            <a class="btn btn-outline-info" type="button">Cancel</a>-->
<!--        </div>-->
<!--    </form>-->
{% endblock %}

